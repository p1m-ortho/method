# Проблемы, которые возникают, и их решения

## Провел реорганизацию p1m-ortho

Удалил и отключил все `Projects`, ~~`Issues`~~ и `Teams`. **`Issues` везде включил назад, но только на тот случай, чтобы аутсайдеры имели возможность внести замечание или предложение по репозиторию. Для участников p1m-ortho буду форсировать внесение всех изменений непосредственно в виде коммитов с отражением правок при необходимости в `METHOD.md`; вплоть до удаления отдельных `Issues` с переносом их содержимого в `METHOD.md`.**

Основная идея — в том, чтобы все сведения хранились непосредственно в репозиториях. Эти же надстройки, которые предлагает GitHub, по сути, способствуют рассеиванию информации. `Projects` и `Teams`, кроме того, способствуют повышению непрозрачности деятельности за счет того, что дают возможность фрагментарно скрывать информацию.

## «Не создадим ли мы помойку?»

Стал вставать вопрос, какую информацию о деятельности коллектива отражать в Гите, а какую нет, чтобы не замусоривать репозитории.

Изначальный посыл был таков: произошло что-либо новое во всем, что как-либо касается нашей научной деятельности — закоммить.

> Спланировали — отметьте. Сделали — отметьте. Возникли новые сведения по ходу дела — отметьте также. Представьте, что по истории коммитов сторонний наблюдатель складывает представление о том, как проходил процесс.
>
> Иначе говоря, документация работы должна быть ровно настолько подробной, чтобы всякий внешний желающий по этому описанию мог эту работу повторить (реплицировать).
>
> И поскольку исследования мы в целом проводим редко (а документацию такого качества и подавно практически нигде от нас не требуют), по-моему, оттачивать этот навык в полутренировочных условиях (как у нас), чтобы, когда ВНЕЗАПНО придется проводить исследование, навык уже был, и исследование получилось достойным.

Предлагаемый подход:

> Я думаю, хорошим критерием отличия помойки от непомойки будет именно то, а считает ли хотя один из участников важным отразить это. Если хотя один считает, давайте отражать.

## Issues: между двух огней

`Issues` сохранил только для репозиториев типа `xs`: это репозитории, которые могут содержать оригинальный программный код, то есть являются традиционными публичными репозиториями. Для них наличие `Issues` — типично и ожидаемо. Поэтому сохранил.

Для остальных репозиториев всю информацию из `Issues` перенес в файлы `METHOD.md` (как и этот). Теперь всю информацию о методах по репозиторию, начиная с протокола исследования и заканчивая готовым к публикации текстом методов. История правок же и будет отражать прогресс работы над исследованием. Такова и была изначальная идея нашего обращения к Git. Подключение же дополнительных возможностей Гитхаба к этому процессу все только запутало. Так что возвращаемся к корням.

Также отключил все вики: также способствуют рассеиванию информации, тогда как все необходимые сведения можно отразить и в самом репозитории.

## Страх перед внесением коммитов

По отношению ко внесению коммитов.

> На Ваше усмотрение, но трогать файл можете преспокойно. Открываете свой гит-клиент, меняете файл, коммитите — пожалуйста. Не бойтесь, делайте, как считаете нужным — если что, потом обсудим. Гит хорош же еще и тем, что практически невозможно что-то испортить.
>
> Постарайтесь только придерживаться везде методички (которая xk-p1m-ortho-method). А в остальном смотрите самостоятельно.

## Ветки, PR, теги и релизы

Относительно веток и пуллреквестов, тегов и релизов.

> Идея такая: если Вы вносите правки в свои тезисы, коммитите их сразу в мастер (мол, почему бы и нет, коль скоро это Ваши тезисы), а если я вношу правки, то в этой ветке, и потом создаю на них пуллреквест. Далее Вы вольны или смерджить ветвь в мастер, или нет.
>
> Вы его принимаете или отклоняете и закрываете. Он остается в списке закрытых. Но это уже не столь важно; важно то, что коммиты, которые сделал в ту ветку, там останутся. Для истории или для будущего.
>
> Эта система с ветками призвана работать именно так: чтобы побочные, экспериментальные проекты можно было делать отдельно, и потом или мерджить их с той или иной веткой на каком-то этапе, или нет.
>
> Для «годных вариантов» в Гите есть другое, специальное приспособление под названием тег. В Гитхабе же есть «релиз». Я еще не вникал, как это работает, но суть в том, что так можно присваивать проекту версии (1.0, 1.1, бета и т. д.). Но и это вторично, так как так или иначе у нас сохраняется самое главное — история коммитов. Годное от негодного, в принципе, можно отличать уже по ней. А у веток идея немного иная: собственно _ветвить_ проект, а годность или негодность, скорее, стадии линейного процесса.

С учетом того, что система с ветками и пуллреквестами в настоящее время среди участников весьма непопулярна, возможно, придется отказаться и от нее.

## Отказ от рутинных PR и мерджинга в пользу ЧП

Все-таки сегодня отказываемся от рутинного мерджинга с созданием PR, и решающим поводом послужило то, что «удалил лишние файлы в ветках» по тезисам:

* e01a27b5e7603f9a9281ea99fe5794bc7bc8068f
* 96669278783b61bc145a901238d8d919f90764fd
* 331b162d9fa9244c8b9f0c111144ffe0fc296779
* d3c24fd627d9c8de6c7fbe015316ff2f1c21732c
* 92b0fee9271d5b78fb30582afafa5417c264da06
* 3390acbdae3ad9c62e444dea733893bee225d479

Мерджи таких веток в мастер с очевидностью будут приводить к удалению этих файлов и в мастере (и к перекрестному удалению файлов тезисов других участников в зависимости от того, какую ветку вольешь), потому и открытые на жту тему PR я закрыл, кабы чего не вышло:

* https://github.com/p1m-ortho/xa-led-p1m-apr-conference/pull/11
* https://github.com/p1m-ortho/xa-led-p1m-apr-conference/pull/12

Логично возникла идея рутинно применять в таких случаях черри-пикинг.

То есть:

* основной автор по-прежнему может коммитить по своим тезисам (и по аналогичным работам) в мастер,
* параллельно при этом могут вестись какие-то обсуждения и пробоваться экспериментальные варианты в персональной ветке,
* при необходимости автор может черри-пикнуть коммит с необходимой версией файла в мастер,
* при этом риски черри-пикнуть вместе с этим случайно что-нибудь не то снижаются, поскольку кроме файлов, относящихся только к тезисам данного автора, из персональной ветки мы ведь все «лишнее убрали».

Заодно такой подход будет стимулировать:

* пользование локальными Гит-клиентами (Гитхаб, кажется, не умеет черри-пикать),
* создание атомарных коммитов (большее число разных версий будет доступно для черри-пикинга).

Эту идею я апробировал двумя черри-пикнутыми в мастер коммитами:

* 97c15233fe51fc265861503a4f104e593d027aa9
* 5f072844baf54e00527f669d412a5ab34d8f8bbd

Так что попробуем пока работать так.

При возникновении проблем с локальными Гит-клиентами (а это ожидаемо, в том числе по опыту ЭБД, например), во-первых, будет повод заниматься их решением, а во-вторых, сам черри-пикинг в мастер при необходимости могу сделать я в соавторстве, когда некая версия тезисов будет отработана в персональной ветке и лично будет согласован ее черри-пикинг в мастер.

## От переписки в мессенджере к Гиту

С учетом того, что обсуждения непосредственно в Гите (ранее в комментариях — отменили, см. про реорганизацию p1m-ortho выше; теперь добавлением новых коммитов) пока идут вяло, отрабатываем такую практику.

Обсуждение проводим в мессенджере, затем выгружаем его в Гит: (а) либо — при согласии всех участников — простым экспортом чата, (б) либо ручным переносом отдельных идей. При необходимости коммит делаем в соавторстве.

Текущая апробация варианта (а):

* 4fe8ec1a702d8ef7a3f7c7825c97fa23fa165e8d
* 04dbab95afeb644cd0dba2d404d4ef2d734e8971
* 21fca1cf2b6bf5e121f4ac9fc78f50389dbd61c7

Более старая:

* e7bc73bc210605c4478605defce96dd34312557d

Свежие примеры применения варианта (б):

* e72e219c9b011f4a48cba5df25cc858aadd0a413
* b743097c4b0effddd9386779ef88c299aa642624
* 4fd9999f94b7e55160a84d5282a10441b26d5e68
* 792702554b430791050aa7722a0c1395246d5e59

## Git/GitHub: что мы умеем

Добавить содержание сбора по основам Git/GitHub 01.02.2019 (ССС).

_Инициативные коммиты_ — коммиты, добавленные по собственной инициативе пользователя, без специально адресованной просьбы их добавить.

Отражают усиление активности в Гите.

По моим расчетам (прошел по всей истории не моих коммитов в собственном dashboard, начиная с 36f57a8dccb8a9fea2ba4f32f8f888631172096b, и вспомнил обстоятельства внесения всех коммитов — для всех смог вспомнить):

1-й: 2fc3164dd854c11c557ec93bf2d34b0672ab76f2, НТМ.
2-й: c86780bac27dc13235405872dcc7230ef5dfc1e9, РАБ.
3-й: 4fd9999f94b7e55160a84d5282a10441b26d5e68, САС.
4-й: b96738556eb1f5573efa92783a7902d33543f4c5, ЭБД.

Итак, все участники теперь добавили хотя бы по одному инициативному коммиту.